<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å¯Œè…¦è¢‹ Tinder - è³‡ç”¢è² å‚µå¤§è€ƒé©—</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { overscroll-behavior-y: contain; } /* é˜²æ­¢æ‰‹æ©Ÿä¸‹æ‹‰æ›´æ–° */
        
        /* å¡ç‰‡å‹•ç•« */
        .card-container { perspective: 1000px; }
        .swipe-left { transform: translateX(-150%) rotate(-15deg); opacity: 0; transition: all 0.4s ease-out; }
        .swipe-right { transform: translateX(150%) rotate(15deg); opacity: 0; transition: all 0.4s ease-out; }
        .reset-card { transform: translateX(0) rotate(0); opacity: 1; transition: none; }
        
        /* éœ‡å‹•å‹•ç•« (ç­”éŒ¯ç”¨) */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }
            20%, 40%, 60%, 80% { transform: translateX(10px); }
        }
        .animate-shake { animation: shake 0.5s; }

        /* å½ˆå‡ºå‹•ç•« */
        @keyframes popIn {
            0% { transform: scale(0.8); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        .animate-pop-in { animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }
    </style>
</head>
<body class="bg-slate-900 text-slate-800 font-sans h-screen overflow-hidden flex flex-col selection:bg-blue-200">

    <!-- é ‚éƒ¨é€²åº¦æ¢èˆ‡åˆ†æ•¸ -->
    <header class="bg-slate-800 text-white p-4 shadow-md z-10 hidden" id="game-header">
        <div class="max-w-md mx-auto flex justify-between items-center">
            <div class="flex items-center gap-2">
                <i class="fa-solid fa-fire text-orange-500"></i>
                <span class="font-bold">é¡Œæ•¸ï¼š<span id="progress-text">1/20</span></span>
            </div>
            <div class="bg-slate-700 px-3 py-1 rounded-full font-bold">
                å¾—åˆ†ï¼š<span id="score-display" class="text-yellow-400">0</span>
            </div>
        </div>
        <div class="max-w-md mx-auto mt-2 bg-slate-700 rounded-full h-2">
            <div id="progress-bar" class="bg-blue-500 h-2 rounded-full transition-all duration-300" style="width: 5%;"></div>
        </div>
    </header>

    <!-- ä¸»éŠæˆ²å€ -->
    <main class="flex-1 relative max-w-md mx-auto w-full flex flex-col justify-center items-center p-4">
        
        <!-- ç•«é¢ 1ï¼šé–‹å§‹ç•«é¢ -->
        <div id="start-screen" class="text-center bg-white p-8 rounded-3xl shadow-2xl w-full animate-pop-in">
            <div class="w-24 h-24 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6">
                <i class="fa-solid fa-brain text-5xl text-blue-600"></i>
            </div>
            <h1 class="text-3xl font-black mb-2">å¯Œè…¦è¢‹ Tinder</h1>
            <p class="text-slate-500 mb-8">è³‡ç”¢èˆ‡è² å‚µçš„ç›´è¦ºå¤§è€ƒé©—</p>
            
            <div class="bg-slate-50 p-4 rounded-xl text-left text-sm mb-8 space-y-3">
                <p><i class="fa-solid fa-hand-pointer text-slate-400 w-5"></i> è¦å‰‡è¶…ç°¡å–®ï¼š</p>
                <p><b class="text-red-500">å¾€å·¦æ»‘ (æˆ–æŒ‰å·¦éµ) ğŸ‘ˆ</b>ï¼šæœƒæŠŠéŒ¢å¾å£è¢‹æ‹¿èµ°çš„ã€Œè² å‚µã€</p>
                <p><b class="text-green-600">å¾€å³æ»‘ (æˆ–æŒ‰å³éµ) ğŸ‘‰</b>ï¼šæœƒæŠŠéŒ¢æ”¾é€²å£è¢‹çš„ã€Œè³‡ç”¢ã€</p>
                <p class="text-slate-400 mt-2 text-xs text-center border-t pt-2">æº–å‚™å¥½æ¸¬è©¦ä½ çš„è²¡å•†äº†å—ï¼Ÿ</p>
            </div>

            <button onclick="startGame()" class="w-full bg-blue-600 text-white font-bold text-lg py-4 rounded-full shadow-lg hover:bg-blue-700 active:scale-95 transition-all">
                é–‹å§‹æ¸¬é©—
            </button>
        </div>

        <!-- ç•«é¢ 2ï¼šéŠæˆ²å¡ç‰‡å€ -->
        <div id="game-screen" class="w-full h-full flex flex-col hidden">
            <!-- å¡ç‰‡å®¹å™¨ (æ”¯æ´æ‰‹å‹¢æ»‘å‹•) -->
            <div class="flex-1 relative flex items-center justify-center card-container mt-4 mb-4" id="swipe-area">
                <div id="question-card" class="absolute w-full bg-white rounded-3xl shadow-xl border-2 border-slate-100 overflow-hidden flex flex-col h-[60vh] max-h-[450px]">
                    <div class="bg-slate-50 h-2/5 flex items-center justify-center border-b border-slate-100">
                        <i id="card-icon" class="fa-solid fa-question text-7xl text-slate-300 drop-shadow-md"></i>
                    </div>
                    <div class="p-6 flex-1 flex flex-col justify-center text-center">
                        <h2 id="card-text" class="text-2xl font-bold leading-snug text-slate-800">
                            è¼‰å…¥é¡Œç›®ä¸­...
                        </h2>
                    </div>
                    
                    <!-- æµ®æ°´å°æç¤º (å·¦å³æ»‘æ™‚é¡¯ç¤º) -->
                    <div id="stamp-liability" class="absolute top-10 right-8 border-4 border-red-500 text-red-500 font-black text-3xl px-4 py-1 rounded-lg transform rotate-12 opacity-0 transition-opacity">è² å‚µ</div>
                    <div id="stamp-asset" class="absolute top-10 left-8 border-4 border-green-500 text-green-500 font-black text-3xl px-4 py-1 rounded-lg transform -rotate-12 opacity-0 transition-opacity">è³‡ç”¢</div>
                </div>
            </div>

            <!-- åº•éƒ¨æŒ‰éˆ•æ“ä½œå€ -->
            <div class="flex justify-center gap-6 pb-6">
                <button onclick="handleAnswer('liability')" class="w-20 h-20 bg-white rounded-full shadow-lg border-4 border-slate-100 text-red-500 text-3xl flex items-center justify-center hover:bg-red-50 hover:border-red-200 active:scale-90 transition-all group">
                    <i class="fa-solid fa-xmark group-hover:scale-125 transition-transform"></i>
                </button>
                <button onclick="handleAnswer('asset')" class="w-20 h-20 bg-white rounded-full shadow-lg border-4 border-slate-100 text-green-500 text-3xl flex items-center justify-center hover:bg-green-50 hover:border-green-200 active:scale-90 transition-all group">
                    <i class="fa-solid fa-check group-hover:scale-125 transition-transform"></i>
                </button>
            </div>
            <div class="flex justify-center gap-16 text-xs font-bold text-slate-400 pb-2">
                <span class="text-red-400 mr-2">ğŸ‘ˆ è² å‚µ (æ‰£éŒ¢)</span>
                <span class="text-green-400 ml-2">è³‡ç”¢ (è³ºéŒ¢) ğŸ‘‰</span>
            </div>
        </div>

        <!-- ç•«é¢ 3ï¼šçµç®—ç•«é¢ -->
        <div id="result-screen" class="text-center bg-white p-8 rounded-3xl shadow-2xl w-full hidden">
            <h2 class="text-2xl font-bold text-slate-600 mb-2">æ¸¬é©—çµæŸï¼</h2>
            <p class="text-sm text-slate-400 mb-6">ä½ çš„è²¡å•†åŸºå› é‘‘å®šçµæœå‡ºçˆ</p>
            
            <div class="text-7xl mb-4" id="rank-emoji">ğŸ‘‘</div>
            <h3 class="text-3xl font-black mb-2 text-slate-800" id="rank-title">è¯çˆ¾è¡—å°‘å¹´è‚¡ç¥</h3>
            
            <div class="bg-slate-100 rounded-2xl p-6 my-6">
                <p class="text-slate-500 text-sm mb-1">æœ€çµ‚å¾—åˆ†</p>
                <p class="text-5xl font-black text-blue-600"><span id="final-score">20</span><span class="text-2xl text-slate-400">/20</span></p>
            </div>

            <p class="text-slate-600 mb-8 leading-relaxed" id="rank-desc">
                å¤ªç¥å•¦ï¼ä½ å®Œå…¨çœ‹é€äº†é‡‘éŒ¢çš„æœ¬è³ªï¼Œä½ å·²ç¶“å…·å‚™å¯Œçˆ¸çˆ¸çš„è…¦è¢‹äº†ï¼ç¹¼çºŒä¿æŒï¼
            </p>

            <button onclick="location.reload()" class="w-full bg-slate-800 text-white font-bold text-lg py-4 rounded-full shadow-lg hover:bg-slate-900 active:scale-95 transition-all flex justify-center items-center gap-2">
                <i class="fa-solid fa-rotate-right"></i> å†ç©ä¸€æ¬¡
            </button>
        </div>

    </main>

    <!-- å½ˆå‡ºå›é¥‹è¦–çª— (Modal) -->
    <div id="feedback-modal" class="fixed inset-0 bg-slate-900/80 backdrop-blur-sm z-50 flex items-center justify-center hidden opacity-0 transition-opacity duration-300">
        <div id="feedback-card" class="bg-white w-11/12 max-w-sm rounded-3xl overflow-hidden shadow-2xl transform scale-95 transition-transform duration-300">
            <div id="feedback-header" class="p-6 text-center text-white">
                <div id="feedback-icon-container" class="w-20 h-20 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-3">
                    <i id="feedback-icon" class="fa-solid fa-check text-5xl"></i>
                </div>
                <h3 id="feedback-title" class="text-2xl font-black tracking-wide">ç­”å°äº†ï¼</h3>
            </div>
            <div class="p-6">
                <div class="mb-6">
                    <p class="text-xs text-slate-400 font-bold mb-1">å‰›å‰›çš„é¡Œç›®ï¼š</p>
                    <p id="feedback-question" class="text-slate-700 font-medium"></p>
                </div>
                <div class="bg-slate-50 border-l-4 border-slate-300 p-4 rounded-r-lg">
                    <p class="text-xs text-slate-500 font-bold mb-2"><i class="fa-solid fa-chalkboard-user"></i> è€å¸«è§£æï¼š</p>
                    <p id="feedback-desc" class="text-sm text-slate-800 leading-relaxed font-medium"></p>
                </div>
                <button onclick="nextQuestion()" class="w-full mt-6 bg-slate-800 text-white font-bold py-3 rounded-xl shadow hover:bg-slate-900 active:scale-95 transition-all">
                    ä¸‹ä¸€é¡Œ <i class="fa-solid fa-arrow-right ml-1"></i>
                </button>
            </div>
        </div>
    </div>

    <script>
        // --- é¡Œåº«è³‡æ–™ (20é¡Œ) ---
        const QUESTIONS = [
            { id: 1, type: 'liability', icon: 'fa-mobile-screen', text: 'åˆ†æœŸ 36 æœŸè²·æœ€æ–°æ¬¾ iPhone 16 Pro Max', desc: 'æ¯å€‹æœˆéƒ½è¦ç¹³åˆ†æœŸæ¬¾ï¼ŒåŠ ä¸Šé«˜æ˜‚çš„é›»ä¿¡è²»ï¼Œè€Œä¸”æ˜å¹´å‡ºæ–°æ©Ÿå®ƒå°±è·Œåƒ¹äº†ï¼ç§‘æŠ€ç”¢å“æ˜¯æŠ˜èˆŠæœ€å¿«çš„è² å‚µã€‚' },
            { id: 2, type: 'liability', icon: 'fa-gamepad', text: 'æ‰‹éŠå¤§èª²é‡‘ï¼Œç‚ºäº†æŠ½ä¸­ã€Œé™å®šç‰ˆ SSR è§’è‰²ã€', desc: 'çˆ½åº¦åªæœ‰æŠ½åˆ°çš„é‚£ä¸€ç¬é–“ï¼éŠæˆ²é€€å‘æˆ–ä¼ºæœå™¨é—œé–‰å¾Œï¼Œé€™ç­†éŒ¢ç›´æ¥æ­¸é›¶ï¼Œå®Œå…¨ç„¡æ³•å¹«ä½ è³ºå›åŠæ¯›éŒ¢ã€‚' },
            { id: 3, type: 'asset', icon: 'fa-arrow-trend-up', text: 'æ¯å€‹æœˆæ‰“å·¥æ‹¿ 3000 å…ƒè²·é«˜è‚¡æ¯ ETF (å¦‚00878)', desc: 'é›–ç„¶å¾ˆç„¡èŠï¼Œä½†é€™ç­†éŒ¢æœƒåœ¨ä½ ç¡è¦ºã€æ‰“é›»å‹•çš„æ™‚å€™ï¼Œé»˜é»˜å¹«ä½ ç”Ÿå‡ºã€Œè‚¡æ¯ã€æ”¾é€²å£è¢‹ï¼Œé€™å°±æ˜¯ç´”åº¦ 100% çš„è³‡ç”¢ã€‚' },
            { id: 4, type: 'liability', icon: 'fa-ticket', text: 'è²·éŸ“åœ‹å¥³åœ˜çš„ VIP æ¼”å”±æœƒé–€ç¥¨èˆ‡å…¨å¥—å‘¨é‚Š', desc: 'è€å¸«çŸ¥é“é€™å°å¿ƒéˆå¾ˆé‡è¦ï¼ä½†åœ¨è²¡å‹™å®šç¾©ä¸Šï¼Œå®ƒä¸æœƒç”¢ç”Ÿæ”¶å…¥ï¼Œé‚„æŠŠä½ è¾›è‹¦æ‰“å·¥çš„éŒ¢æç©ºäº†ã€‚å¶çˆ¾ç‚ºä¹‹å¯ä»¥ï¼Œä½†è¦çŸ¥é“å®ƒæ˜¯è² å‚µã€‚' },
            { id: 5, type: 'liability', icon: 'fa-motorcycle', text: 'èŠ± 5 è¬å…ƒå¤§æ”¹æ©Ÿè»Šçš„æ’æ°£ç®¡èˆ‡é¿éœ‡å™¨', desc: 'é™¤äº†è€å¸¥ï¼Œå®ƒåªæœƒå¢åŠ ä½ çš„æ²¹è€—ã€ä¿é¤Šè²»ï¼Œç”šè‡³é‚„æœƒåƒä¸Šå™ªéŸ³ç½°å–®ï¼é€™æ˜¯å…¸å‹çš„åéŒ¢æ€ªç¸ã€‚' },
            { id: 6, type: 'asset', icon: 'fa-motorcycle', text: 'è²·ä¸€å°äºŒæ‰‹ Gogoro ç”¨ä¾†è·‘ Foodpanda / UberEats', desc: 'è°æ˜ï¼é›–ç„¶æ©Ÿè»ŠæœƒæŠ˜èˆŠï¼Œä½†ä½ æŠŠå®ƒè®Šæˆäº†ã€Œç”Ÿè²¡å·¥å…·ã€ã€‚åªè¦è·‘å¤–é€è³ºçš„éŒ¢å¤§æ–¼è²·è»Šå’Œå……é›»çš„éŒ¢ï¼Œå®ƒå°±æ˜¯è³‡ç”¢ï¼' },
            { id: 7, type: 'liability', icon: 'fa-shoe-prints', text: 'æ’éšŠæ¶åˆ°é™é‡ç‰ˆåç‰Œçƒé‹ï¼Œæ¯å¤©ç©¿å»å­¸æ ¡ç‚«è€€', desc: 'é‹å­ä¸€è½åœ°ã€ä¸€æœ‰æ‘ºç—•ï¼Œåƒ¹å€¼å°±ç¬é–“è…°æ–¬ã€‚ç‚«è€€å®Œä¹‹å¾Œï¼Œå®ƒä¸æœƒå¹«ä½ è³ºé€²ä»»ä½•ä¸€æ¯›éŒ¢ã€‚' },
            { id: 8, type: 'asset', icon: 'fa-box-archive', text: 'æ’éšŠæ¶åˆ°é™é‡ç‰ˆçƒé‹ï¼Œé€£é‹ç›’åŒ…è†œæ”¾é€²é˜²æ½®ç®±ç­‰æ¼²åƒ¹', desc: 'å¾ˆæœ‰ç”Ÿæ„é ­è…¦ï¼ä½ æŠŠå®ƒç•¶æˆã€ŒæŠ•è³‡å•†å“ã€ï¼Œåˆ©ç”¨ç¨€ç¼ºæ€§åœ¨äºŒæ‰‹å¸‚å ´é«˜åƒ¹è½‰è³£ï¼ŒæŠŠæ›´å¤šçš„éŒ¢æ”¾å›å£è¢‹ã€‚' },
            { id: 9, type: 'asset', icon: 'fa-id-card', text: 'èŠ±éŒ¢å ±åè£œç¿’ï¼Œè€ƒå–ã€Œæ±½è»Šä¿®è­·ä¹™ç´šæŠ€è¡“å£«ã€è­‰ç…§', desc: 'æœ€å¼·çš„è³‡ç”¢å°±æ˜¯ä½ çš„è…¦è¢‹ï¼é€™å¼µè­‰ç…§èƒ½è®“ä½ åœ¨æœªä¾†æ±‚è·æ™‚åº•è–ªæ¯”åˆ¥äººé«˜ï¼Œé€™ç­†å ±åè²»æœƒåŒ–ç‚ºä½ æœªä¾†çš„æŒçºŒæ”¶å…¥ã€‚' },
            { id: 10, type: 'asset', icon: 'fa-toolbox', text: 'èŠ±éŒ¢è²·é«˜éšå·¥å…·çµ„ï¼Œåœ¨æ”¾å­¸å¾Œå¹«åŒå­¸æ›æ©Ÿæ²¹ã€ä¿®è»Š', desc: 'å‰µæ¥­å®¶æ€ç¶­ï¼ä½ è²·çš„ä¸æ˜¯å·¥å…·ï¼Œè€Œæ˜¯ã€Œè³ºéŒ¢çš„ç³»çµ±ã€ã€‚åªè¦ä¸€ç›´æœ‰åŒå­¸æ‰¾ä½ ä¿®è»Šï¼Œé€™å¥—å·¥å…·å°±æ˜¯æœƒç”Ÿé‡‘è›‹çš„éµã€‚' },
            { id: 11, type: 'liability', icon: 'fa-bag-shopping', text: 'åˆ†æœŸä»˜æ¬¾è²·åç‰ŒåŒ…åŒ…ï¼Œç•¶ä½œç¦®ç‰©é€çµ¦å¦ä¸€åŠ', desc: 'æ„›æƒ…ç„¡åƒ¹ï¼Œä½†åŒ…åŒ…æ˜¯è² å‚µï¼è€Œä¸”åˆ†æœŸä»˜æ¬¾çš„åˆ©æ¯éå¸¸å¯æ€•ï¼Œä¸è¦ç‚ºäº†é¢å­è€Œè®“è‡ªå·±é™·å…¥é•·æœŸçš„è²¡å‹™é»‘æ´ã€‚' },
            { id: 12, type: 'asset', icon: 'fa-video', text: 'ç¶“ç‡Ÿä¸€å€‹å°ˆé–€æ•™äººã€Œå¦‚ä½•ä¿é¤Šæ©Ÿè»Šã€çš„ IG/TikTok å¸³è™Ÿ', desc: 'æ•¸ä½è³‡ç”¢ï¼é›–ç„¶ä¸€é–‹å§‹æ²’éŒ¢ï¼Œä½†ç•¶ä½ å»ºç«‹èµ·æµé‡ï¼Œé€™äº›å½±ç‰‡æœƒ24å°æ™‚åœ¨ç¶²è·¯ä¸Šå¹«ä½ å·¥ä½œï¼Œç”šè‡³å¸¶ä¾†æ¥­é…æ”¶å…¥ã€‚' },
            { id: 13, type: 'liability', icon: 'fa-ghost', text: 'èŠ±äº† 2000 å…ƒå¤¾æ»¿æ•´åºŠçš„å‹•æ¼«å…¬ä»”ï¼Œæ“ºåœ¨æˆ¿é–“é•·ç°å¡µ', desc: 'å¤¾çš„ç•¶ä¸‹å¾ˆçˆ½ï¼Œä½†é€™äº›å…¬ä»”ä¸æœƒå¹«ä½ è³ºéŒ¢ï¼Œç”šè‡³æ¬å®¶æ™‚é‚„è¦ºå¾—ä½”ç©ºé–“ã€‚é€™ 2000 å…ƒæ°¸é é›¢é–‹ä½ çš„å£è¢‹äº†ã€‚' },
            { id: 14, type: 'liability', icon: 'fa-helmet-safety', text: 'ä¿¡ç”¨å°ç™½ä¸ç”¨æ€•ï¼ç”¨ã€Œç„¡å¡åˆ†æœŸã€è²· 3 è¬å…ƒçš„é€²å£å®‰å…¨å¸½', desc: 'è¶…ç´šå¤§é­”ç‹ï¼ç„¡å¡åˆ†æœŸçš„éš±è—åˆ©æ¯æ¥µé«˜ï¼Œç‚ºäº†å¸¥æ°£ï¼Œä½ æœªä¾†å¹¾å€‹æœˆæ‰“å·¥çš„éŒ¢éƒ½è¢«ææ—©æ‰£å…‰äº†ï¼Œæ¨™æº–çš„è² å‚µã€‚' },
            { id: 15, type: 'liability', icon: 'fa-play', text: 'ç¶å®šå¡ç‰‡è¨‚é–± Netflix å’Œ Spotifyï¼Œä½†å¹³å¸¸æ ¹æœ¬æ²’åœ¨ç”¨', desc: 'æ¯å€‹æœˆè‡ªå‹•æ‰£æ¬¾å¹¾ç™¾å¡Šå¥½åƒå¾ˆå°‘ï¼Œä½†é€™äº›ã€Œå¾®å‹è² å‚µã€å°±åƒæ°´ç®¡æ¼æ°´ï¼Œä¸çŸ¥ä¸è¦ºæŠŠä½ çš„è²¡å¯ŒæŠ½ä¹¾ã€‚' },
            { id: 16, type: 'asset', icon: 'fa-piggy-bank', text: 'æŠŠæ‰“å·¥è³ºçš„ 1 è¬å…ƒï¼Œå­˜é€²æœ‰ 3% é«˜åˆ©æ´»å­˜çš„æ•¸ä½éŠ€è¡Œå¸³æˆ¶', desc: 'éå¸¸è°æ˜çš„ç¬¬ä¸€æ­¥ï¼é›–ç„¶åˆ©æ¯ä¸å¤šï¼Œä½†é€™ç­†éŒ¢å·²ç¶“é–‹å§‹ã€Œè‡ªå·±å·¥ä½œã€ï¼Œæ¯å€‹æœˆéƒ½æœƒè‡ªå‹•ç”Ÿå‡ºé›¶ç”¨éŒ¢çµ¦ä½ ã€‚' },
            { id: 17, type: 'asset', icon: 'fa-mobile-retro', text: 'åœ¨ç¶²è·¯ä¸Šç”¨ 1000 å…ƒæ”¶è³¼æ•…éšœæ‰‹æ©Ÿï¼Œè‡ªå·±ä¿®å¥½å¾Œè³£ 3000 å…ƒ', desc: 'é€™å°±æ˜¯æŠ€è¡“çš„åŠ›é‡ï¼ä½ æŠŠã€Œå£æ‰çš„è² å‚µã€é€éä½ çš„é›™æ‰‹è®Šæˆäº†ã€Œè³‡ç”¢ã€ï¼Œå‰µé€ äº† 2000 å…ƒçš„ç¾é‡‘æµå…¥ã€‚' },
            { id: 18, type: 'asset', icon: 'fa-capsules', text: 'æ¹Šå¹¾åƒå¡Šè·Ÿæœ‹å‹åˆè³‡è²·ä¸€å°ã€Œæ‰­è›‹æ©Ÿã€ï¼Œæ”¾å¤œå¸‚é–€å£çµ¦è·¯äººè½‰', desc: 'æ­å–œä½ æ™‰å‡ä¼æ¥­ä¸»ï¼ä½ ä¸éœ€ä¸€ç›´ç«™åœ¨é‚£è£¡ï¼Œæ‰­è›‹æ©Ÿ 24 å°æ™‚éƒ½åœ¨å¹«ä½ è³ºè·¯äººçš„éŒ¢ï¼Œé€™å°±æ˜¯è¢«å‹•ç¾é‡‘æµã€‚' },
            { id: 19, type: 'liability', icon: 'fa-pills', text: 'çœ‹åˆ°ç¶²ç´…ç›´æ’­å¸¶è²¨ï¼Œè…¦æ³¢ä¸€å¼±è²·äº†è¶…æ˜‚è²´çš„ã€Œæ¸›è‚¥ç¥è—¥ã€', desc: 'è¡å‹•æ˜¯é­”é¬¼ï¼è²·ä¾†é€šå¸¸åƒå…©å¤©å°±æ”¾åœ¨è§’è½éæœŸï¼Œå®ƒä¸åƒ…æ‹¿èµ°ä½ çš„éŒ¢ï¼Œé‚„ç„¡æ³•çµ¦ä½ æ‰¿è«¾çš„æ•ˆæœã€‚' },
            { id: 20, type: 'liability', icon: 'fa-cat', text: 'èŠ±äº†å…©è¬å¡Šè²·åç¨®è²“ï¼Œæ¯å€‹æœˆé‚„è¦è²·é€²å£ç½é ­è·Ÿè²“ç ‚', desc: 'åœ¨ã€Œè²¡å‹™å®šç¾©ã€ä¸Šï¼Œç‰ æ¯å€‹æœˆéƒ½æœƒæŒçºŒæ¶ˆè€—ä½ çš„é‡‘éŒ¢ï¼Œå±¬æ–¼è² å‚µã€‚(é€™å‘Šè¨´æˆ‘å€‘ï¼Œè²·è² å‚µå‰è¦ç¢ºä¿è‡ªå·±æœ‰è³‡ç”¢ä¾†é¤Šå®ƒï¼)' }
        ];

        // --- éŠæˆ²ç‹€æ…‹ ---
        let currentIndex = 0;
        let score = 0;
        let isAnimating = false; // é˜²æ­¢é‡è¤‡é»æ“Š

        // DOM å…ƒç´ 
        const screenStart = document.getElementById('start-screen');
        const screenGame = document.getElementById('game-screen');
        const screenResult = document.getElementById('result-screen');
        const gameHeader = document.getElementById('game-header');
        const cardElement = document.getElementById('question-card');
        const cardIcon = document.getElementById('card-icon');
        const cardText = document.getElementById('card-text');
        
        // æ»‘å‹•ç›¸é—œè®Šæ•¸
        let touchStartX = 0;
        let touchEndX = 0;
        const swipeArea = document.getElementById('swipe-area');

        // --- åˆå§‹åŒ–èˆ‡é–‹å§‹ ---
        function startGame() {
            // æ´—ç‰Œé¡Œç›® (è‹¥è€å¸«å¸Œæœ›é¡Œç›®å›ºå®šé †åºï¼Œå¯è¨»è§£é€™è¡Œ)
            // QUESTIONS.sort(() => Math.random() - 0.5); 
            
            currentIndex = 0;
            score = 0;
            
            screenStart.classList.add('hidden');
            screenGame.classList.remove('hidden');
            gameHeader.classList.remove('hidden');
            
            loadQuestion();
        }

        // --- è¼‰å…¥é¡Œç›® ---
        function loadQuestion() {
            if (currentIndex >= QUESTIONS.length) {
                showResultScreen();
                return;
            }

            const q = QUESTIONS[currentIndex];
            
            // é‡ç½®å¡ç‰‡ç‹€æ…‹
            cardElement.className = 'absolute w-full bg-white rounded-3xl shadow-xl border-2 border-slate-100 overflow-hidden flex flex-col h-[60vh] max-h-[450px] reset-card';
            document.getElementById('stamp-liability').style.opacity = '0';
            document.getElementById('stamp-asset').style.opacity = '0';
            
            // è¼‰å…¥å…§å®¹
            cardIcon.className = `fa-solid ${q.icon} text-7xl text-blue-500 drop-shadow-md`;
            cardText.innerText = q.text;

            // æ›´æ–°é€²åº¦æ¢
            document.getElementById('progress-text').innerText = `${currentIndex + 1}/${QUESTIONS.length}`;
            document.getElementById('progress-bar').style.width = `${((currentIndex) / QUESTIONS.length) * 100}%`;
            document.getElementById('score-display').innerText = score;
            
            isAnimating = false;
        }

        // --- è™•ç†ä½œç­” (æŒ‰éˆ•æˆ–æ»‘å‹•) ---
        function handleAnswer(choice) {
            if (isAnimating) return;
            isAnimating = true;

            const q = QUESTIONS[currentIndex];
            const isCorrect = choice === q.type;

            // 1. å¡ç‰‡é£›å‡ºå‹•ç•«
            if (choice === 'liability') {
                document.getElementById('stamp-liability').style.opacity = '1';
                cardElement.classList.add('swipe-left');
            } else {
                document.getElementById('stamp-asset').style.opacity = '1';
                cardElement.classList.add('swipe-right');
            }

            // 2. è¨ˆåˆ†
            if (isCorrect) {
                score++;
                document.getElementById('score-display').innerText = score;
            } else {
                // ç­”éŒ¯æ™‚ç•«é¢éœ‡å‹•æç¤º
                document.body.classList.add('animate-shake');
                setTimeout(() => document.body.classList.remove('animate-shake'), 500);
            }

            // 3. å»¶é²ä¸€ä¸‹é¡¯ç¤ºå›é¥‹ Modalï¼Œè®“é£›å‡ºå‹•ç•«è·‘å®Œ
            setTimeout(() => {
                showFeedbackModal(isCorrect, q);
            }, 300);
        }

        // --- é¡¯ç¤ºå›é¥‹ Modal ---
        function showFeedbackModal(isCorrect, q) {
            const modal = document.getElementById('feedback-modal');
            const card = document.getElementById('feedback-card');
            const header = document.getElementById('feedback-header');
            const icon = document.getElementById('feedback-icon');
            const title = document.getElementById('feedback-title');
            
            // è¨­å®š Modal å…§å®¹
            document.getElementById('feedback-question').innerText = q.text;
            document.getElementById('feedback-desc').innerText = q.desc;

            // æ ¹æ“šå°éŒ¯æ›´æ›æ¨£å¼
            if (isCorrect) {
                header.className = 'p-6 text-center text-white bg-green-500';
                icon.className = 'fa-solid fa-check text-5xl text-white';
                title.innerText = 'è§€å¿µæ­£ç¢ºï¼';
            } else {
                header.className = 'p-6 text-center text-white bg-red-500';
                icon.className = 'fa-solid fa-xmark text-5xl text-white';
                title.innerText = 'å“å‘€ï¼ŒæéŒ¯äº†ï¼';
                
                // ä¿®æ­£æç¤ºï¼šå‘Šè¨´ä»–æ­£ç¢ºç­”æ¡ˆ
                const correctTypeStr = q.type === 'asset' ? 'è³‡ç”¢' : 'è² å‚µ';
                document.getElementById('feedback-desc').innerHTML = `<span class="text-red-500 font-bold mb-1 block">âš ï¸ å…¶å¯¦é€™æ˜¯ä¸€å€‹ã€Œ${correctTypeStr}ã€ï¼</span>` + q.desc;
            }

            // é¡¯ç¤º Modal (å¸¶å‹•ç•«)
            modal.classList.remove('hidden');
            // å¼·åˆ¶é‡ç¹ªä»¥è§¸ç™¼ transition
            void modal.offsetWidth;
            modal.classList.add('opacity-100');
            card.classList.replace('scale-95', 'scale-100');
        }

        // --- é€²å…¥ä¸‹ä¸€é¡Œ ---
        function nextQuestion() {
            const modal = document.getElementById('feedback-modal');
            const card = document.getElementById('feedback-card');
            
            // éš±è— Modal
            modal.classList.remove('opacity-100');
            card.classList.replace('scale-100', 'scale-95');
            
            setTimeout(() => {
                modal.classList.add('hidden');
                currentIndex++;
                loadQuestion();
            }, 300);
        }

        // --- é¡¯ç¤ºæœ€çµ‚çµç®—ç•«é¢ ---
        function showResultScreen() {
            screenGame.classList.add('hidden');
            gameHeader.classList.add('hidden');
            screenResult.classList.remove('hidden');
            screenResult.classList.add('animate-pop-in');

            document.getElementById('final-score').innerText = score;

            let rankEmoji = '';
            let rankTitle = '';
            let rankDesc = '';

            if (score <= 6) {
                rankEmoji = 'ğŸ¥¬';
                rankTitle = 'è¢«æ”¶å‰²çš„ç¶ æ²¹æ²¹éŸ­èœ';
                rankDesc = 'æ…˜ï¼å•†äººçš„æœ€æ„›ï¼Œä½ çš„éŒ¢éƒ½è¢«åˆ¥äººçš„æ…¾æœ›é™·é˜±é¨™èµ°äº†ã€‚è€å¸«ä¸Šèª²è¦èªçœŸè½ï¼Œå¿«æŠŠã€Œè³‡ç”¢ã€çš„è§€å¿µå»ºç«‹èµ·ä¾†ï¼';
            } else if (score <= 14) {
                rankEmoji = 'ğŸ‘·â€â™‚ï¸';
                rankTitle = 'è¾›è‹¦çš„æ‰“å·¥æˆ°å£«';
                rankDesc = 'è§€å¿µä¸éŒ¯ï¼ä½ çŸ¥é“ä»€éº¼æ˜¯è³‡ç”¢ï¼Œä½†å¶çˆ¾é‚„æ˜¯æœƒè¢«æ…¾æœ›é¨™èµ°éŒ¢ã€‚åªè¦æ¸›å°‘è¡å‹•æ¶ˆè²»ï¼Œä½ é›¢è²¡å¯Œè‡ªç”±å°±ä¸é äº†ï¼';
            } else {
                rankEmoji = 'ğŸ‘‘';
                rankTitle = 'è¯çˆ¾è¡—å°‘å¹´è‚¡ç¥';
                rankDesc = 'å¤ªç¥å•¦ï¼ä½ å®Œå…¨çœ‹é€äº†é‡‘éŒ¢çš„æœ¬è³ªï¼Œä¸å®¹æ˜“è¢«å¤–è¡¨æ¬ºé¨™ã€‚ä½ å·²ç¶“å…·å‚™å¯Œçˆ¸çˆ¸çš„è…¦è¢‹äº†ï¼Œä¿æŒä¸‹å»ï¼';
            }

            document.getElementById('rank-emoji').innerText = rankEmoji;
            document.getElementById('rank-title').innerText = rankTitle;
            document.getElementById('rank-desc').innerText = rankDesc;
        }

        // --- æ‰‹å‹¢æ»‘å‹•åµæ¸¬é‚è¼¯ (Touch Events) ---
        swipeArea.addEventListener('touchstart', (e) => {
            if(isAnimating) return;
            touchStartX = e.changedTouches[0].screenX;
            // å–æ¶ˆå¡ç‰‡çš„å‹•ç•«éæ¸¡ï¼Œè®“å®ƒè·Ÿè‘—æ‰‹æŒ‡å‹• (é€™é‚Šç‚ºç°¡åŒ–é‚è¼¯ï¼Œåƒ…åµæ¸¬æ»‘å‹•çµæŸ)
        }, {passive: true});

        swipeArea.addEventListener('touchend', (e) => {
            if(isAnimating) return;
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        }, {passive: true});

        function handleSwipe() {
            const swipeDistance = touchEndX - touchStartX;
            const threshold = 50; // è§¸ç™¼æ»‘å‹•çš„æœ€å°è·é›¢

            if (swipeDistance > threshold) {
                // å¾€å³æ»‘ -> è³‡ç”¢
                handleAnswer('asset');
            } else if (swipeDistance < -threshold) {
                // å¾€å·¦æ»‘ -> è² å‚µ
                handleAnswer('liability');
            }
            // è‹¥è·é›¢ä¸å¤ ï¼Œå‰‡ä»€éº¼éƒ½ä¸åš
        }

    </script>
</body>
</html>